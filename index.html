<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<!-- put HTML homepage here! -->
<body>
    <div id='content'>
      <h1> This is our project! </h1>
      <ul class="nav navbar-nav">
        <li class="active">
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/business-data">BusinessData</a>
        </li>
        <li>
          <a href="/christie1">example</a>
        </li>
      </ul>
    <form id="frm1" action="/business-data">
      <label for="name">Search:</label>
      <input type="text" id="name" name="name">

      <label for="province">Province:</label>
      <input type="button" id="btnGenerate" value="Province List" onclick="ProvincePopulate()" />

      <!-- TAKE 1 -->
      <!-- <script type="text/javascript">
              if(window.XMLHttpRequest){
                data_xml=new XMLHttpRequest();
              }
              else {
                data_xml=new ActiveObject("Microsoft.XMLHTTP");
              }

              data_xml.open("GET",'../brazilbusinesscommunitiesv2/business-data.xml',false);
              data_xml.send();
              xml_str=data_xml.responseXML;

              var x=xml_str.getElementsByTagName("province");
              var y=xml_str.getElementsByTagName("id");
              var str='<select name=id>';
              for (i=0; i<x.length; i++) {
                str +='<option value=' + y[i].childNodes[0].nodeValue + '>' + x[i].childNodes[0].nodeValue + '</option>';
              }
              str +='</select>';
              document.write(str);
          </script> -->

          <!-- TAKE 2 -->
          <!-- <script type="text/javascript">
                  function ProvincePopulate() {
                    var xml=null;
                    xml.load("business-data.xml");

                    var xmlDoc;
                    if (window.DOMParser) {
                      parser = new DOMParser();
                      xmlDoc = parser.parseFromString(xml, "text/xml");
                    }
                    else {
                      xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                      xmlDoc.async = false;
                      xmlDoc.loadXML(xml);
                    }

                    var businesses = xmlDoc.getElementsByTagName("business");
                    var ddl = document.getElementById("ddlProvince");

                    for (var i = 0; i < customers.length; i++) {
                      var option = document.createElement("option");
                      option.text = businesses[i].getElementsByTagName("province")[0].textContent;
                      option.value = businesses[i].getElementsByTagName("id")[0].textContent;
                      ddl.options.add(option);
                    }
                  }
                </script> -->

          <!-- TAKE 3 -->
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
      <script>
        $(document).ready(function() {
          $.ajax({
            type: "GET",
            url: "bussiness-data.xml",
            dataType: "xml",
            success: function(xml) {
              var select = $('ddlProvince');

              $(xml).find('dropdown').each(function(){
                $(this).find('province').each(function(){
                  var value = $(this).attr('value');
                  var label = $(this).text();
                  select.append("<option class='ddindent' value='"+ value +"'>"+label+"</option>");
                });
              });
              select.children(":first").text("Select Province").attr("selected", true);
            } //success close

          });
        });
      </script>
      <select id="ddlProvince">
        <option>loading</option>
      </select>

    </form>

  </div>
</body>
</html>
